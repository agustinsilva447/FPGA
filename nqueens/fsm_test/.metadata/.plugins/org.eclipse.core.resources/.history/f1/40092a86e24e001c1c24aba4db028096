#include <stdio.h>
#include "comblock.h"
#include "platform.h"
#include "xil_printf.h"
#include "xparameters.h"


int main()
{
    init_platform();
    u32 k = 0;


    cbWrite(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_OREG3, 1);
    cbWrite(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_OREG3, 0);
    cbWrite(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_OREG1, 1);
    cbWrite(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_OREG2, 1);
    cbWrite(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_OREG1, 0);

    while(!(cbRead(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_IREG1)&0x1));

	xil_printf("next_out_1: %U. \n",cbRead(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_IREG1));
	xil_printf("ack_out_7 : %U. \n",cbRead(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_IREG2));

    cleanup_platform();
    return 0;
}
