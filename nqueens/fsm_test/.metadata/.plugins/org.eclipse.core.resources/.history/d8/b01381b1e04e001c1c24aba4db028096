#include <stdio.h>
#include "comblock.h"
#include "platform.h"
#include "xil_printf.h"
#include "xparameters.h"


int main()
{
    init_platform();
    u32 k = 0;

    cbWrite(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_OREG3, 1);
    cbWrite(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_OREG3, 0);

	for (int i = 0; i < 16; ++i)
	{
		if (k == 0){
			k = 1;
		}else{
			k = 0;
		}
		cbWrite(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_OREG4, k);
		xil_printf("idx: %U. u_k: %U. \n",cbRead(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_IREG8) ,cbRead(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_IREG9));
		xil_printf("idx: %U. u_0: %U. \n",cbRead(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_IREG8) ,cbRead(XPAR_COMBLOCK_0_AXIL_BASEADDR, CB_IREG10));
	}

    cleanup_platform();
    return 0;
}
